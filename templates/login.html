{% extends 'base.html' %}
{% block title %}Login{% endblock %} 
{% block content %} 

{% with messages = get_flashed_messages() %} 
  {% if messages %}
    <div class="p-4 mb-4 text-sm text-green-800 bg-green-100 rounded-lg">
      {{ messages | join('<br />') | safe }}
    </div>
  {% endif %} 
{% endwith %}

<div class="w-full max-w-md mx-auto bg-gray-800 bg-opacity-50 backdrop-filter backdrop-blur-xl rounded-2xl shadow-xl p-8">
  <h2 class="text-3xl font-bold text-center bg-gradient-to-r from-green-400 to-emerald-500 text-transparent bg-clip-text">
    Login
  </h2>
  <p class="text-white text-center mb-3">Welcome Back</p>

  <form id="loginForm">
    {{ form.csrf_token }} 

    <!-- Email Field -->
    <div class="relative mb-4">
      <i class="fas fa-envelope absolute left-3 top-3 text-gray-400"></i>
      {{ form.email(class="w-full pl-10 pr-4 py-2 bg-gray-700 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-green-400", id="email", placeholder="Email Address") }}
      <p id="emailError" class="text-red-500 text-sm mt-1 hidden text-right"></p>
    </div>

    <!-- Password Field -->
    <div class="relative mb-6">
      <i class="fas fa-lock absolute left-3 top-3 text-gray-400"></i>
      {{ form.password(class="w-full pl-10 pr-4 py-2 bg-gray-700 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-green-400", id="password", placeholder="Password") }}
      <p id="passwordError" class="text-red-500 text-sm mt-1 hidden text-right"></p>
    </div>

    <!-- Submit Button with Loader -->
    <button id="loginButton" type="submit" class="w-full py-3 px-4 bg-gradient-to-r from-green-500 to-emerald-600 text-white font-bold rounded-lg shadow-lg hover:from-green-600 hover:to-emerald-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 focus:ring-offset-gray-900 transition duration-200">
      <span id="buttonText">Login</span>
      <span id="buttonSpinner" class="hidden">
        <i class="fas fa-spinner fa-spin"></i>
      </span>
    </button>
  </form>
</div>

<div class="text-center mt-4">
  <p class="text-white">
    Don't have an account?
    <a href="{{ url_for('register') }}" class="text-green-400 hover:underline">Register</a>
  </p>
</div>


{% endblock content %}
